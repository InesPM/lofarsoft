dnl cf/drivers-post.ac for PLplot  -*- autoconf -*-
dnl
dnl Configuration for the psttf driver
dnl
dnl Copyright (C) 2006  Andrew Ross
dnl
dnl This file is part of PLplot.
dnl
dnl PLplot is free software; you can redistribute it and/or modify
dnl it under the terms of the GNU Library General Public License as published
dnl by the Free Software Foundation; version 2 of the License.
dnl
dnl PLplot is distributed in the hope that it will be useful,
dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
dnl GNU Library General Public License for more details.
dnl
dnl You should have received a copy of the GNU Library General Public License
dnl along with the file PLplot; if not, write to the Free Software
dnl Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA

dnl Configure psttf driver using pkg-config

AC_CHECK_PROG(PKG_CONFIG_CHECK, pkg-config, yes, no)

if test "$PKG_CONFIG_CHECK" = no; then

  AC_MSG_WARN([pkg-config not found])
  AC_MSG_WARN([Setting enable_psttf to no])

  enable_psttf=no

fi

if test "$enable_dyndrivers" = no -a "$enable_psttf" = yes; then 
  AC_MSG_WARN([psttf requires dynamic drivers])
  AC_MSG_WARN([Setting enable_psttf to no])
  enable_psttf=no
fi

if test "$enable_psttf" = yes ; then

  dnl Test for pango, pangoft2 and LASI libraries
  PKG_CHECK_MODULES(PSTTF,pango pangoft2 lasi,enable_psttf_lib=yes,enable_psttf_lib=no )

  dnl Continue if the required libraries exist
  if test "$enable_psttf_lib" = no; then

    AC_MSG_WARN([required libraries not found via pkg-config;])
    AC_MSG_WARN([  psttf driver disabled])
    enable_psttf=no

  fi

fi

AC_SUBST(PSTTF_CFLAGS)
AC_SUBST(PSTTF_LIBS)
