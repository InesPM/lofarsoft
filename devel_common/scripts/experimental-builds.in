#!${bash_executable}

echo "-- Set environment variables ..."

export LOFARSOFT=${LUS_ROOT}
export PATH=${LUS_ROOT}/release/bin:$PATH
. ${LUS_ROOT}/devel_common/scripts/init.sh

echo "-- Cleaning up code base ..."

cd ${LUS_ROOT}
rm -rf release/*
rm -rf build/*

echo "-- Updating working copy ..."

cd ${LUS_ROOT}
${svn_executable} cleanup
${svn_executable} up

echo "-- Run configure scripts ..."

cd ${LUS_ROOT}/build
./bootstrap

echo "-- Build DAL ..."

cd ${LUS_ROOT}/build
make dal
cd src/DAL/src/dal-build
make Experimental

echo "-- Build LUS packages ..."

for USG_PACKAGE in anaamika cr pulsar rm
{
    echo "-- Building $USG_PACKAGE ..."
    cd ${LUS_ROOT}/build
    make $USG_PACKAGE
    echo "-- Experimental build of $USG_PACKAGE ..."
    cd ${LUS_ROOT}/build/$USG_PACKAGE
    make install

    echo "-- Initiating testing procedures ..."

    make ExperimentalStart
    make ExperimentalConfigure
    make ExperimentalBuild
    make ExperimentalSubmit

    make ExperimentalTest
    make ExperimentalCoverage
    make ExperimentalSubmit

    make ExperimentalMemCheck
    make ExperimentalSubmit
}

