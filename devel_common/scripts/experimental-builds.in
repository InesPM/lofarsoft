#!/bin/bash

echo "-- Set environment variables ..."

export LOFARSOFT=${USG_ROOT}
. ${USG_ROOT}/devel_common/scripts/init.sh

echo "-- Cleaning up code base ..."

cd ${USG_ROOT}
rm -rf release/*
rm -rf build/*

echo "-- Updating working copy ..."

cd ${USG_ROOT}
svn up

echo "-- Building projects ..."

cd ${USG_ROOT}/build
./bootstrap

for USG_PACKAGE in dal cr
{
    echo "-- Building $USG_PACKAGE ..."
    cd ${USG_ROOT}/build
    make $USG_PACKAGE
    echo "-- Experimental build of $USG_PACKAGE ..."
    cd ${USG_ROOT}/build/$USG_PACKAGE
    make Experimental
}
