/* $Id$ */

/**

\page crtools_changes CR-Tools :: Required and requested changes

<hr>

- \ref crtools_changes_build
- \ref crtools_changes_classes
- \ref crtools_changes_tools

<hr>

\section crtools_changes_build Build issues

- Opening a file with the CR::LOFAR_TBB class doesn't work. A line like:
  \verbatim
  hdf5In = new LOFAR_TBB(files(fnum),524288);
  \endverbatim
  stop either without error message, or with something like:
  \verbatim
  *** glibc detected *** double free or corruption: 0x0876f688 ***
  \endverbatim
  I have also seen it throw a segfault, but that was with a potentially bogous
  version of the DAL. (I.e. the posibility that the includes and libraries from
  two different boost version were used.)

- The library for the graphical user interface (libhfget) is not getting build on the machine in
  Karlsruhe:
  \verbatim
  [ 56%] Building CXX object implement/CMakeFiles/hfget.dir/GUI/hfget.cc.o
  In file included
  from /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc:1618:
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc: In  
  function 'T mycast(void*) [with T = int]':
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:29:
  instantiated from 'void set_ptr_to_value(void*, DATATYPE, T) [with T = void*]'
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:26:
  instantiated from here
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc:140: error: cast
  from 'void*' to 'Integer' loses precision
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc: In  
  function 'T mycast(void*) [with T = double]':
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:32:
  instantiated from 'void set_ptr_to_value(void*, DATATYPE, T) [with T = void*]'
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:26:
  instantiated from here
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc:140:  
  error: cast from 'void*' to 'Integer' loses precision
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc: In  
  function 'T mycast(void*) [with T = std::complex<double>]':
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:35:
  instantiated from 'void set_ptr_to_value(void*, DATATYPE, T) [with T = void*]'
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/switch-type.cc:26:
  instantiated from here
  /home/schroeder/temp/usg/src/CR-Tools/implement/GUI/hfget.cc:140:  
  error: cast from 'void*' to 'Integer' loses precision
  make[2]: *** [implement/CMakeFiles/hfget.dir/GUI/hfget.cc.o] Fehler 1
  make[1]: *** [implement/CMakeFiles/hfget.dir/all] Fehler 2
  make: *** [all] Fehler 2
  \endverbatim

- Clean up linker instructions to reduce size of produced libraries and
  executables.

<hr>

\section crtools_changes_classes Issues with library classes

- CR::SpatialCoordinate
  - test \e toWorld and \e toPixel methods for all coordinate configurations

- CR::SkymapCoordinates
  - replace internal CR::TimeFreq object with CR::TimeFreqSkymap
  - use CR::SpatialCoordinate instead of individual coordinate objects

- CR::LOFAR_TBB
  - add an \e attachFile method to the class, such that we can have a default
  constructor without directly opening the data file
  
- Data (GUI module)
  - add unit support - this could, however, be done by special objects 
  attached to each real data vector containing the unit name (e.g. "m"), 
  scale letter (e.g. "k" for km) and a scale factor (here 1000). In fact per
  unit there needs to be only on single unit object that all data objects point 
  to if needed.
  - do more operator overloading, such that data["Station=1:Data"]=vector, 
  replaces data["Station=1:Data"].put(vector).
  - use operators like -> or so for setting Links (also in Python).
  - There is also a class Vector_Selector which is intended to allow you retrieving
  sub-parts of the data vector (e.g. only every 2nd value, or just values 
  above a certain threshold ...). That needs a bit more work still ...

<hr>

\section crtools_changes_tools Issues with application programs

- skymapper
  - complete the command-line interface using the Boost \e program_options library

*/

