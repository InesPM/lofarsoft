<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LOFAR-ICD3 Convertor without any  selection and rebinning: /home/vilchez/Bureau/dynspec/src/ICD3-ICD6-Complete/DynspecAll.cpp File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="lofar.jpeg"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LOFAR-ICD3 Convertor without any  selection and rebinning
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">/home/vilchez/Bureau/dynspec/src/ICD3-ICD6-Complete/DynspecAll.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main program for converting ICD3 files to ICD6 (dynamic spectrum) files without any time-frequency selection and rebinning (Complete convertion)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br/>
<code>#include &lt;string&gt;</code><br/>
<code>#include &lt;fstream&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="_reader___root_8h_source.html">Reader_Root.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_stock___write___root___metadata_8h_source.html">Stock_Write_Root_Metadata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_reader___dynspec_8h_source.html">Reader_Dynspec.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_stock___write___dynspec___metadata_8h_source.html">Stock_Write_Dynspec_Metadata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_stock___write___dynspec___data_8h_source.html">Stock_Write_Dynspec_Data.h</a>&quot;</code><br/>
<code>#include &lt;dal/lofar/BF_File.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for DynspecAll.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="_dynspec_all_8cpp__incl.png" border="0" usemap="#_2home_2vilchez_2_bureau_2dynspec_2src_2_i_c_d3-_i_c_d6-_complete_2_dynspec_all_8cpp" alt=""/></div>
<map name="_2home_2vilchez_2_bureau_2dynspec_2src_2_i_c_d3-_i_c_d6-_complete_2_dynspec_all_8cpp" id="_2home_2vilchez_2_bureau_2dynspec_2src_2_i_c_d3-_i_c_d6-_complete_2_dynspec_all_8cpp">
<area shape="rect" id="node13" href="_reader___root_8h.html" title="Reader_Root.h" alt="" coords="312,83,421,112"/><area shape="rect" id="node19" href="_stock___write___root___metadata_8h.html" title="Stock_Write_Root_Metadata.h" alt="" coords="200,160,400,189"/><area shape="rect" id="node27" href="_reader___dynspec_8h.html" title="Reader_Dynspec.h" alt="" coords="496,83,629,112"/><area shape="rect" id="node32" href="_stock___write___dynspec___metadata_8h.html" title="Stock_Write_Dynspec_Metadata.h" alt="" coords="696,160,920,189"/><area shape="rect" id="node38" href="_stock___write___dynspec___data_8h.html" title="Stock_Write_Dynspec_Data.h" alt="" coords="474,160,672,189"/></map>
</div>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dynspec_all_8cpp.html#a5403ee0052605540e098ac825f236c90">is_readableTer</a> (const std::string &amp;file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dynspec_all_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Main program for converting ICD3 files to ICD6 (dynamic spectrum) files without any time-frequency selection and rebinning (Complete convertion) </p>
<p>Projet LOFAR</p>
<dl class="date"><dt><b>Date:</b></dt><dd>17/12/2012 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Nicolas VILCHEZ </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="copyright"><dt><b>Copyright:</b></dt><dd>LPC2E/CNRS Station de radio-astronomie de Nan√ßay </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>DAL Library 2.5 (library for hdf5 file)</dd></dl>
<p><br/>
Algorithm overview: This code (pipeline) uses several classes. Each classes has a particular role for processing ICD3 data to dynamic spectrum data (ICD6) The main code etablishes principal parameters of the observation (number of SAP, Beam and Stokes parameters. Thanks to robustess nomenclature of ICD3 format, with these parameters, we are able to know which file we have to process for a given SAP, Beam and Stokes parameter) After existency tests and principal parameters determination, the main code will loop of the SAPs that it has to process:</p>
<p>First, the code wil stock Root group metadata. Root Metadata are red by a function named readRoot and contained in the class <a class="el" href="_reader___root_8h.html">Reader_Root.h</a>, the Root group is generated and Root's metadata are stocked, then written by a function named writeRootMetadata and contained in the class <a class="el" href="_stock___write___root___metadata_8h.html">Stock_Write_Root_Metadata.h</a></p>
<p>Secondly, the main code will loop on Beam, and generate dynamic spectrum group and its metadata. The dynamic spectrum's metadata are red by a function named readDynspec and contained in the class <a class="el" href="_reader___dynspec_8h.html">Reader_Dynspec.h</a>, after, metadata are stoked, then written by a function named writeDynspecMetadata contained in Stock_Write_Dynspec_Metadata_Part.h</p>
<p>Finaly, data are processed. Because LOFAR data are very voluminous, we have to develop a strategy for: <br/>
 - avoid swaping <br/>
 - have enough memory for loading data <br/>
 etc ... We decide to use a frozen quantity of RAM for a processing. This quantity is chosen by the user and corresponds to a number of time bins that we can process for this RAM. So, the code will loop of the number of Time series we need to process all data. no rebinning is done inside these blocks (see ICD3-ICD6-Rebin module). To conclude, data processing is done time blocks by time blocks, and data generation is done by the function writeDynspecData which is included in the class <a class="el" href="_stock___write___dynspec___data_8h.html">Stock_Write_Dynspec_Data.h</a> All data contained in ICD3 observation are processed </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5403ee0052605540e098ac825f236c90"></a><!-- doxytag: member="DynspecAll.cpp::is_readableTer" ref="a5403ee0052605540e098ac825f236c90" args="(const std::string &amp;file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="_dynspec_all_8cpp.html#a5403ee0052605540e098ac825f236c90">is_readableTer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td><br/>
Check if file is readable, so if file exists ! </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean value </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_dynspec_all_8cpp_a5403ee0052605540e098ac825f236c90_icgraph.png" border="0" usemap="#_dynspec_all_8cpp_a5403ee0052605540e098ac825f236c90_icgraph" alt=""/></div>
<map name="_dynspec_all_8cpp_a5403ee0052605540e098ac825f236c90_icgraph" id="_dynspec_all_8cpp_a5403ee0052605540e098ac825f236c90_icgraph">
<area shape="rect" id="node3" href="_dynspec_all_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="160,5,211,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="DynspecAll.cpp::main" ref="a0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_dynspec_all_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><br/>
Usage: Dynspec Observation-Path-DIR Observation-Number(ex:Lxxxxx) Output-hdf5-DIR [Facultative:Dataset-RAM-allocation (in Go; default value: 1Go)]</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of arguments </td></tr>
    <tr><td class="paramname">argv</td><td>Table of arguments(see above c.f Usage)</td></tr>
  </table>
  </dd>
</dl>
<p><br/>
</p>
<dl class="see"><dt><b>See also:</b></dt><dd>Variables: <br/>
pathDir Observation (ICD3) directory <br/>
obsName Observation ID <br/>
SAPNumber Number of SAP to process <br/>
memoryRAM RAM Memory allocation for processing <br/>
Test Existing files allow to determinine <a class="el" href="_dynspec_all_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> observation parameter: <br/>
obsNofSAP Number of SAP contained in the observation directory <br/>
obsNofBeam Number of BEAM (i.e signals from a station or a correlated sum) in the observation directory <br/>
obsNofStockes Number of Stokes paramters contained in the observation directory <br/>
stokesComponent Vector of Stokes parameter <br/>
We have 2 kinds of observation: using or not Pxxx nomenclature <br/>
rebinAllDynspec Flag which allow to process only one selected SAP or All <br/>
methodFlag Flag which allow to know if Pxxxnomenclatureis used <br/>
outputFile Output file for One SAP contains all dynamic spectrum</dd></dl>
<p><br/>
</p>
<dl class="see"><dt><b>See also:</b></dt><dd>2 modes (depends with nomenclature): <br/>
 <br/>
 FIRST MODE: <br/>
Loop on SAPs <br/>
Root group generation =&gt; generation of the output file (*.h5) and its metadata <br/>
Loop on BEAMs <br/>
generation of a dynamic spectrum in the Root group and its metadata <br/>
Data processing for this dynamic spectrum <br/>
 <br/>
 SECOND MODE: <br/>
(if Pxxx nomenclature is used:) Loop on SAPs <br/>
(if Pxxx nomenclature is used:) Loop on BEAMs <br/>
(if Pxxx nomenclature is used) Loop on differents Parts of the dynamic spectrum <br/>
(if Pxxx nomenclature is used) generation of a dynamic spectrum in the Root group and its metadata, One dynamic spectrum for each Part <br/>
(if Pxxx nomenclature is used) Data processing for this dynamic spectrum</dd></dl>
<p><br/>
</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>ICD6files </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_dynspec_all_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#_dynspec_all_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="_dynspec_all_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="_dynspec_all_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" id="node3" href="_dynspec_all_8cpp.html#a5403ee0052605540e098ac825f236c90" title="is_readableTer" alt="" coords="229,5,336,35"/><area shape="rect" id="node5" href="class_reader___root.html#a6a022809888fdc2b66fccc63ebac2dd9" title="Reader_Root::readRoot" alt="" coords="203,59,363,88"/><area shape="rect" id="node9" href="class_stock___write___root___metadata.html#a247f269a27e24a4ce97ba7a759cfe3b7" title="Stock_Write_Root_Metadata::writeRootMetadata" alt="" coords="129,112,436,141"/><area shape="rect" id="node11" href="class_reader___dynspec.html#ad700712653c8c6b4e5b7f3782dc0954e" title="Reader_Dynspec::readDynspec" alt="" coords="179,165,387,195"/><area shape="rect" id="node19" href="class_stock___write___dynspec___metadata.html#a94f9d9169c147c92c39bf0049a858e36" title="Stock_Write_Dynspec_Metadata::writeDynspecMetadata" alt="" coords="105,219,460,248"/><area shape="rect" id="node21" href="class_stock___write___dynspec___data.html#abd44c8482d995bd391e6010ce53a2a2c" title="Stock_Write_Dynspec_Data::writeDynspecData" alt="" coords="131,272,435,301"/><area shape="rect" id="node7" href="class_stock___write___root___metadata.html#ad5e23815d68593a61e14431927b7f716" title="Stock_Write_Root_Metadata::stockRootMetadata" alt="" coords="533,59,845,88"/><area shape="rect" id="node13" href="_reader___dynspec_8cpp.html#a279ccd4541950f7bb6fde5a04a786dd9" title="is_readableBis" alt="" coords="636,112,743,141"/><area shape="rect" id="node15" href="class_stock___write___dynspec___metadata.html#adbbba2a4b003e531f60dc4d7977f1a2b" title="Stock_Write_Dynspec_Metadata::stockDynspecMetadata" alt="" coords="509,165,869,195"/><area shape="rect" id="node17" href="class_stock___write___dynspec___data.html#a0917bd4e0368e064176758b23004dea1" title="Stock_Write_Dynspec_Data::stockDynspecData" alt="" coords="536,219,843,248"/><area shape="rect" id="node23" href="_stock___write___dynspec___data_8cpp.html#a740c0c834395069b060fe8d7e31653cd" title="is_readable" alt="" coords="645,272,733,301"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 10 2013 14:20:56 for LOFAR-ICD3 Convertor without any  selection and rebinning by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
